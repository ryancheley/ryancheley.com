<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="generator" content="Pelican" />
        <title>Making Background Images</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="I'm a big fan of podcasts. I've been listening to them for 4 or 5 years now. One of my favorite Podcast Networks, Relay just had their second..." />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">My Place on the Internet</a></h1>
                <nav><ul>
                    <li><a href="/category/apple.html">Apple</a></li>
                    <li><a href="/category/automation.html">Automation</a></li>
                    <li><a href="/category/books.html">Books</a></li>
                    <li><a href="/category/coding.html">Coding</a></li>
                    <li><a href="/category/conferences.html">Conferences</a></li>
                    <li><a href="/category/conferenes.html">Conferenes</a></li>
                    <li><a href="/category/django.html">Django</a></li>
                    <li><a href="/category/github.html">GitHub</a></li>
                    <li><a href="/category/ios.html">iOS</a></li>
                    <li class="active"><a href="/category/macos.html">macOS</a></li>
                    <li><a href="/category/misc.html">misc</a></li>
                    <li><a href="/category/music.html">Music</a></li>
                    <li><a href="/category/musings.html">Musings</a></li>
                    <li><a href="/category/podcasts.html">Podcasts</a></li>
                    <li><a href="/category/productivity.html">Productivity</a></li>
                    <li><a href="/category/professional-development.html">Professional Development</a></li>
                    <li><a href="/category/python.html">Python</a></li>
                    <li><a href="/category/raspberry-pi.html">Raspberry Pi</a></li>
                    <li><a href="/category/server.html">Server</a></li>
                    <li><a href="/category/sports.html">Sports</a></li>
                    <li><a href="/category/web.html">Web</a></li>
                    <li><a href="/category/writing.html">Writing</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/making-background-images.html" rel="bookmark"
           title="Permalink to Making Background Images">Making Background Images</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-09-17T23:24:00+02:00">
                Published: Sun 17 September 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/ryan.html">ryan</a>
        </address>
<p>In <a href="/category/macos.html">macOS</a>.</p>

</footer><!-- /.post-info -->      <p>I'm a big fan of <a href="http://www.ryancheley.com/podcasts-i-like/">podcasts</a>. I've been listening to them for 4 or 5 years now. One of my favorite Podcast Networks, <a href="http://www.relay.fm">Relay</a> just had their second anniversary. They offer memberships and after listening to hours and hours of <em>All The Great Shows</em> I decided that I needed to become a <a href="https://www.relay.fm/membership">member</a>.</p>
<p>One of the awesome perks of <a href="http://www.relay.fm">Relay</a> membership is a set of <strong>Amazing</strong> background images.</p>
<p>This is fortuitous as I've been looking for some good backgrounds for my iMac, and so it seemed like a perfect fit.</p>
<p>On my iMac I have several <code>spaces</code> configured. One for <code>Writing</code>, one for <code>Podcast</code> and one for everything else. I wanted to take the backgrounds from Relay and have them on the <code>Writing</code> space and the <code>Podcasting</code> space, but I also wanted to be able to distinguish between them. One thing I could try to do would be to open up an image editor (Like <a href="http://www.photoshop.com">Photoshop</a>, <a href="http://www.pixelmator.com/pro/">Pixelmater</a> or <a href="https://flyingmeat.com/acorn/">Acorn</a>) and add text to them one at a time (although I'm sure there is a way to script them) but I decided to see if I could do it using Python.</p>
<p>Turns out, I can.</p>
<p>This code will take the background images from my <code>/Users/Ryan/Relay 5K Backgrounds/</code> directory and spit them out into a subdirectory called <code>Podcasting</code></p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageStat</span><span class="p">,</span> <span class="n">ImageFont</span><span class="p">,</span> <span class="n">ImageDraw</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">listdir</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">isfile</span><span class="p">,</span> <span class="n">join</span>

<span class="c1"># Declare Text Attributes</span>
<span class="n">TextFontSize</span> <span class="o">=</span> <span class="mi">400</span>
<span class="n">TextFontColor</span> <span class="o">=</span> <span class="p">(</span><span class="mi">128</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">128</span><span class="p">)</span>
<span class="n">font</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="s2">&quot;~/Library/Fonts/Inconsolata.otf&quot;</span><span class="p">,</span> <span class="n">TextFontSize</span><span class="p">)</span>

<span class="n">mypath</span> <span class="o">=</span> <span class="s1">&#39;/Users/Ryan/Relay 5K Backgrounds/&#39;</span>
<span class="n">onlyfiles</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="n">mypath</span><span class="p">)</span> <span class="k">if</span> <span class="n">isfile</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">mypath</span><span class="p">,</span> <span class="n">f</span><span class="p">))]</span>
<span class="n">onlyfiles</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;.DS_Store&#39;</span><span class="p">)</span>

<span class="n">rows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">onlyfiles</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rows</span><span class="p">):</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">mypath</span><span class="o">+</span><span class="n">onlyfiles</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">size</span>
    <span class="n">draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
    <span class="n">TextXPos</span> <span class="o">=</span> <span class="mf">0.6</span> <span class="o">*</span> <span class="n">width</span>
    <span class="n">TextYPos</span> <span class="o">=</span> <span class="mf">0.85</span> <span class="o">*</span> <span class="n">height</span>
    <span class="n">draw</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="n">TextXPos</span><span class="p">,</span> <span class="n">TextYPos</span><span class="p">),</span><span class="s1">&#39;Podcasting&#39;</span><span class="p">,</span><span class="n">TextFontColor</span><span class="p">,</span><span class="n">font</span><span class="o">=</span><span class="n">font</span><span class="p">)</span>
    <span class="n">draw</span><span class="o">.</span><span class="n">text</span>
    <span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;/Users/Ryan/Relay 5K Backgrounds/Podcasting/&#39;</span><span class="o">+</span><span class="n">onlyfiles</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;/Users/Ryan/Relay 5K Backgrounds/Podcasting/&#39;</span><span class="o">+</span><span class="n">onlyfiles</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39; succesfully saved!&#39;</span><span class="p">)</span>
</code></pre></div>

<p>This was great, but it included all of the images, and some of them are <em>really</em> bright. I mean, like <em>really</em> bright.</p>
<p>So I decided to use <a href="http://www.ryancheley.com/blog/2016/12/17/its-science">something I learned while helping my daughter with her Science Project last year</a> and determine the brightness of the images and use only the dark ones.</p>
<p>This lead me to update the code to this:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageStat</span><span class="p">,</span> <span class="n">ImageFont</span><span class="p">,</span> <span class="n">ImageDraw</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">listdir</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">isfile</span><span class="p">,</span> <span class="n">join</span>

<span class="k">def</span> <span class="nf">brightness01</span><span class="p">(</span> <span class="n">im_file</span> <span class="p">):</span>
   <span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">im_file</span><span class="p">)</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">)</span>
   <span class="n">stat</span> <span class="o">=</span> <span class="n">ImageStat</span><span class="o">.</span><span class="n">Stat</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
   <span class="k">return</span> <span class="n">stat</span><span class="o">.</span><span class="n">mean</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># Declare Text Attributes</span>
<span class="n">TextFontSize</span> <span class="o">=</span> <span class="mi">400</span>
<span class="n">TextFontColor</span> <span class="o">=</span> <span class="p">(</span><span class="mi">128</span><span class="p">,</span><span class="mi">128</span><span class="p">,</span><span class="mi">128</span><span class="p">)</span>
<span class="n">font</span> <span class="o">=</span> <span class="n">ImageFont</span><span class="o">.</span><span class="n">truetype</span><span class="p">(</span><span class="s2">&quot;~/Library/Fonts/Inconsolata.otf&quot;</span><span class="p">,</span> <span class="n">TextFontSize</span><span class="p">)</span>

<span class="n">mypath</span> <span class="o">=</span> <span class="s1">&#39;/Users/Ryan/Relay 5K Backgrounds/&#39;</span>
<span class="n">onlyfiles</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="n">mypath</span><span class="p">)</span> <span class="k">if</span> <span class="n">isfile</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="n">mypath</span><span class="p">,</span> <span class="n">f</span><span class="p">))]</span>
<span class="n">onlyfiles</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;.DS_Store&#39;</span><span class="p">)</span>

<span class="n">darkimages</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">rows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">onlyfiles</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rows</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">brightness01</span><span class="p">(</span><span class="n">mypath</span><span class="o">+</span><span class="n">onlyfiles</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="mi">65</span><span class="p">:</span>
        <span class="n">darkimages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">onlyfiles</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

<span class="n">darkimagesrows</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">darkimages</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">darkimagesrows</span><span class="p">):</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">mypath</span><span class="o">+</span><span class="n">darkimages</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">size</span>
    <span class="n">draw</span> <span class="o">=</span> <span class="n">ImageDraw</span><span class="o">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
    <span class="n">TextXPos</span> <span class="o">=</span> <span class="mf">0.6</span> <span class="o">*</span> <span class="n">width</span>
    <span class="n">TextYPos</span> <span class="o">=</span> <span class="mf">0.85</span> <span class="o">*</span> <span class="n">height</span>
    <span class="n">draw</span><span class="o">.</span><span class="n">text</span><span class="p">((</span><span class="n">TextXPos</span><span class="p">,</span> <span class="n">TextYPos</span><span class="p">),</span><span class="s1">&#39;Podcasting&#39;</span><span class="p">,</span><span class="n">TextFontColor</span><span class="p">,</span><span class="n">font</span><span class="o">=</span><span class="n">font</span><span class="p">)</span>
    <span class="n">draw</span><span class="o">.</span><span class="n">text</span>
    <span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s1">&#39;/Users/Ryan/Relay 5K Backgrounds/Podcasting/&#39;</span><span class="o">+</span><span class="n">darkimages</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;/Users/Ryan/Relay 5K Backgrounds/Podcasting/&#39;</span><span class="o">+</span><span class="n">darkimages</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39; succesfully saved!&#39;</span><span class="p">)</span>
</code></pre></div>

<p>I also wanted to have backgrounds generated for my <strong>Writing</strong> space, so I tacked on this code:</p>
<div class="highlight"><pre><span></span><code><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">range</span><span class="p">(</span><span class="n">darkimagesrows</span><span class="p">)</span><span class="err">:</span><span class="w"></span>
<span class="w">    </span><span class="n">img</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Image</span><span class="p">.</span><span class="k">open</span><span class="p">(</span><span class="n">mypath</span><span class="o">+</span><span class="n">darkimages</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">img</span><span class="p">.</span><span class="k">size</span><span class="w"></span>
<span class="w">    </span><span class="n">draw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ImageDraw</span><span class="p">.</span><span class="n">Draw</span><span class="p">(</span><span class="n">img</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">TextXPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.72</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">width</span><span class="w"></span>
<span class="w">    </span><span class="n">TextYPos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.85</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">height</span><span class="w"></span>
<span class="w">    </span><span class="n">draw</span><span class="p">.</span><span class="nc">text</span><span class="p">((</span><span class="n">TextXPos</span><span class="p">,</span><span class="w"> </span><span class="n">TextYPos</span><span class="p">),</span><span class="s1">&#39;Writing&#39;</span><span class="p">,</span><span class="n">TextFontColor</span><span class="p">,</span><span class="n">font</span><span class="o">=</span><span class="n">font</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="n">draw</span><span class="p">.</span><span class="nc">text</span><span class="w"></span>
<span class="w">    </span><span class="n">img</span><span class="p">.</span><span class="k">save</span><span class="p">(</span><span class="s1">&#39;/Users/Ryan/Relay 5K Backgrounds/Writing/&#39;</span><span class="o">+</span><span class="n">darkimages</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;/Users/Ryan/Relay 5K Backgrounds/Writing/&#39;</span><span class="o">+</span><span class="n">darkimages</span><span class="o">[</span><span class="n">i</span><span class="o">]+</span><span class="s1">&#39; succesfully saved!&#39;</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

<p>The <code>print</code> statements at the end of the <code>for</code> loops were so that I could tell that something was actually happening. The images were VERY large (close to 10MB for each one) so the <code>PIL</code> library was taking some time to process the data and I was concerned that something had frozen / stopped working</p>
<p>This was a pretty straightforward project, but it was pretty fun. It allowed me to go from this:</p>
<p><img alt="" class="alignnone size-medium wp-image-121" height="169" src="/images/uploads/2017/09/Cortex-5K-small-original-300x169.png" width="300"></p>
<p>To this:</p>
<p><img alt="" class="alignnone size-medium wp-image-122" height="169" src="/images/uploads/2017/09/Cortex-5K-small-300x169.png" width="300"></p>
<p>For the text attributes I had to play around with them for a while until I found the color, font and font size that I liked and looked good (to me).</p>
<p>The Positioning of the text also took a bit of experimentation, but a little trial and error and I was all set.</p>
<p>Also, for the <code>brightness</code> level of 65 I just looked at the images that seemed to work and found a threshold to use. The actual value may vary depending on the look you're doing for.</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://simonwillison.net">Simon Wilison</a></li>
                            <li><a href="https://www.mattlayman.com">Matt Layman</a></li>
                            <li><a href="https://pybit.es">PyBites</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="https://twitter.com/ryancheley/">Twitter</a></li>
                            <li><a href="https://github.com/ryancheley">GitHub</a></li>
                            <li><a href="https://www.linkedin.com/in/ryan-cheley/">LinkedIn</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>