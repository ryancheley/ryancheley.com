<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="generator" content="Pelican" />
        <title>Twitter Word Cloud</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="As previously mentioned I'm a bit of a Twitter user. One of the things that I came across, actually the first python project I did, was writing..." />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">My Place on the Internet</a></h1>
                <nav><ul>
                    <li><a href="/category/apple.html">Apple</a></li>
                    <li><a href="/category/automation.html">Automation</a></li>
                    <li><a href="/category/books.html">Books</a></li>
                    <li><a href="/category/coding.html">Coding</a></li>
                    <li><a href="/category/conferences.html">Conferences</a></li>
                    <li><a href="/category/conferenes.html">Conferenes</a></li>
                    <li><a href="/category/django.html">Django</a></li>
                    <li><a href="/category/github.html">GitHub</a></li>
                    <li><a href="/category/ios.html">iOS</a></li>
                    <li><a href="/category/macos.html">macOS</a></li>
                    <li><a href="/category/misc.html">misc</a></li>
                    <li><a href="/category/music.html">Music</a></li>
                    <li><a href="/category/musings.html">Musings</a></li>
                    <li><a href="/category/podcasts.html">Podcasts</a></li>
                    <li><a href="/category/productivity.html">Productivity</a></li>
                    <li><a href="/category/professional-development.html">Professional Development</a></li>
                    <li class="active"><a href="/category/python.html">Python</a></li>
                    <li><a href="/category/raspberry-pi.html">Raspberry Pi</a></li>
                    <li><a href="/category/server.html">Server</a></li>
                    <li><a href="/category/sports.html">Sports</a></li>
                    <li><a href="/category/web.html">Web</a></li>
                    <li><a href="/category/writing.html">Writing</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/twitter-word-cloud.html" rel="bookmark"
           title="Permalink to Twitter Word Cloud">Twitter Word Cloud</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-11-23T03:41:00+01:00">
                Published: Wed 23 November 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/ryan.html">ryan</a>
        </address>
<p>In <a href="/category/python.html">Python</a>.</p>
<p>tags: <a href="/tag/python.html">python</a> <a href="/tag/twitter.html">twitter</a> </p>
</footer><!-- /.post-info -->      <p><a href="/pitching-stats-and-python.html">As previously mentioned</a> I'm a bit of a <a href="https://www.twitter.com">Twitter</a> user. One of the things that I came across, actually the first python project I did, was writing code to create a <a href="https://en.wikipedia.org/wiki/Tag_cloud">word cloud</a> based on the most recent 20 posts of my <a href="https://www.twitter.com/">Twitter</a> feed.</p>
<p>I used a post by <a href="http://sebastianraschka.com/Articles/2014_twitter_wordcloud.html">Sebastian Raschka</a> and a post on <a href="http://www.techtrek.io/generating-word-cloud-from-twitter-feed-with-python/">TechTrek.io</a> as guides and was able to generate the word cloud pretty easily.</p>
<p>As usual, we import the need libraries:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">tweepy</span><span class="o">,</span> <span class="nn">json</span><span class="o">,</span> <span class="nn">random</span>
<span class="kn">from</span> <span class="nn">tweepy</span> <span class="kn">import</span> <span class="n">OAuthHandler</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">wordcloud</span> <span class="kn">import</span> <span class="n">WordCloud</span><span class="p">,</span> <span class="n">STOPWORDS</span>
<span class="kn">from</span> <span class="nn">scipy.misc</span> <span class="kn">import</span> <span class="n">imread</span>
</code></pre></div>

<p>The code below allows access to my feed using secret keys from my twitter account. They have been removed from the post so that my twitter account doesn't stop being mine:</p>
<div class="highlight"><pre><span></span><code>consumer_key = consumer_key
consumer_secret = consumer_secret
access_token = access_token
access_secret = access_secret

auth = OAuthHandler(consumer_key, consumer_secret)
auth.set_access_token(access_token, access_secret)

api = tweepy.API(auth)
</code></pre></div>

<p>Next I open a file called <code>tweets</code> and write to it the tweets (referred to in the <code>for</code> loop as <code>status</code>) and encode with <code>utf-8</code>. If you don't do the following error is thrown: <code>TypeError: a bytes-like object is required, not 'str'</code>. And who wants a <code>TypeError</code> to be thrown?</p>
<div class="highlight"><pre><span></span><code><span class="nv">f</span> <span class="o">=</span> <span class="nv">open</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">tweets</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">wb</span><span class="s1">&#39;</span><span class="ss">)</span>

<span class="k">for</span> <span class="nv">status</span> <span class="nv">in</span> <span class="nv">api</span>.<span class="nv">user_timeline</span><span class="ss">()</span>:
    <span class="nv">f</span>.<span class="nv">write</span><span class="ss">(</span><span class="nv">api</span>.<span class="nv">get_status</span><span class="ss">(</span><span class="nv">status</span>.<span class="nv">id</span><span class="ss">)</span>.<span class="nv">text</span>.<span class="nv">encode</span><span class="ss">(</span><span class="s2">&quot;</span><span class="s">utf-8</span><span class="s2">&quot;</span><span class="ss">))</span>
<span class="nv">f</span>.<span class="nv">close</span><span class="ss">()</span>
</code></pre></div>

<p>Now I'm ready to do something with the tweets that I collected. I read the file into a variable called <code>words</code></p>
<div class="highlight"><pre><span></span><code><span class="nv">words</span><span class="o">=</span><span class="s1">&#39;</span><span class="s"> </span><span class="s1">&#39;</span>
<span class="nv">count</span> <span class="o">=</span><span class="mi">0</span>
<span class="nv">f</span> <span class="o">=</span> <span class="nv">open</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">tweets</span><span class="s1">&#39;</span>, <span class="s1">&#39;</span><span class="s">rb</span><span class="s1">&#39;</span><span class="ss">)</span>
<span class="k">for</span> <span class="nv">line</span> <span class="nv">in</span> <span class="nv">f</span>:
    <span class="nv">words</span><span class="o">=</span> <span class="nv">words</span> <span class="o">+</span> <span class="nv">line</span>.<span class="nv">decode</span><span class="ss">(</span><span class="s2">&quot;</span><span class="s">utf-8</span><span class="s2">&quot;</span><span class="ss">)</span>
<span class="nv">f</span>.<span class="nv">close</span>
</code></pre></div>

<p>Next, we start on constructing the word cloud itself. We declare words that we want to ignore (in this case <strong>https</strong> is ignored, otherwise it would count the protocol of links that I've been tweeting).</p>
<div class="highlight"><pre><span></span><code>stopwords = {&#39;https&#39;, &#39;co&#39;, &#39;RT&#39;}
</code></pre></div>

<p>Read in the twitter bird to act as a mask</p>
<div class="highlight"><pre><span></span><code>logomask = imread(&#39;twitter_mask.png&#39;)
</code></pre></div>

<p>Finally, generate the wordcloud, plot it and save the image:</p>
<div class="highlight"><pre><span></span><code><span class="nv">wordcloud</span> <span class="o">=</span> <span class="nv">WordCloud</span><span class="ss">(</span>
    <span class="nv">font_path</span><span class="o">=</span><span class="s1">&#39;</span><span class="s">/Users/Ryan/Library/Fonts/Inconsolata.otf</span><span class="s1">&#39;</span>,
    <span class="nv">stopwords</span><span class="o">=</span><span class="nv">STOPWORDS</span>.<span class="nv">union</span><span class="ss">(</span><span class="nv">stopwords</span><span class="ss">)</span>,
    <span class="nv">background_color</span><span class="o">=</span><span class="s1">&#39;</span><span class="s">white</span><span class="s1">&#39;</span>,
    <span class="nv">mask</span> <span class="o">=</span> <span class="nv">logomask</span>,
    <span class="nv">max_words</span><span class="o">=</span><span class="mi">500</span>,
    <span class="nv">width</span><span class="o">=</span><span class="mi">1800</span>,
    <span class="nv">height</span><span class="o">=</span><span class="mi">1400</span>
<span class="ss">)</span>.<span class="nv">generate</span><span class="ss">(</span><span class="nv">words</span><span class="ss">)</span>

<span class="nv">plt</span>.<span class="nv">imshow</span><span class="ss">(</span><span class="nv">wordcloud</span>.<span class="nv">recolor</span><span class="ss">(</span><span class="nv">color_func</span><span class="o">=</span><span class="nv">None</span>, <span class="nv">random_state</span><span class="o">=</span><span class="mi">3</span><span class="ss">))</span>
<span class="nv">plt</span>.<span class="nv">axis</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">off</span><span class="s1">&#39;</span><span class="ss">)</span>
<span class="nv">plt</span>.<span class="nv">savefig</span><span class="ss">(</span><span class="s1">&#39;</span><span class="s">./Twitter Word Cloud - </span><span class="s1">&#39;</span><span class="o">+</span><span class="nv">time</span>.<span class="nv">strftime</span><span class="ss">(</span><span class="s2">&quot;</span><span class="s">%Y%m%d</span><span class="s2">&quot;</span><span class="ss">)</span><span class="o">+</span><span class="s1">&#39;</span><span class="s">.png</span><span class="s1">&#39;</span>, <span class="nv">dpi</span><span class="o">=</span><span class="mi">300</span><span class="ss">)</span>
<span class="nv">plt</span>.<span class="k">show</span><span class="ss">()</span>
</code></pre></div>

<p>The second to last line generates a dynamically named file based on the date so that I can do this again and save the image without needing to do too much thinking.</p>
<p>Full Code can be found on my <a href="https://www.github.com/miloardot/">GitHub Report</a></p>
<p>My Twitter Word Cloud as of today looks like this:</p>
<p><img alt="" class="alignnone size-medium wp-image-116" height="200" src="/images/uploads/2017/12/Twitter-Word-Cloud-20161122-300x200.png" width="300"></p>
<p>I think it will be fun to post this image every once in a while, so as I remember, I'll run the script again and update the Word Cloud!</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://simonwillison.net">Simon Wilison</a></li>
                            <li><a href="https://www.mattlayman.com">Matt Layman</a></li>
                            <li><a href="https://pybit.es">PyBites</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="https://twitter.com/ryancheley/">Twitter</a></li>
                            <li><a href="https://github.com/ryancheley">GitHub</a></li>
                            <li><a href="https://www.linkedin.com/in/ryan-cheley/">LinkedIn</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>