<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="generator" content="Pelican" />
        <title>My Place on the Internet - SSH</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">My Place on the Internet</a></h1>
                <nav><ul>
                    <li><a href="/category/apple.html">Apple</a></li>
                    <li><a href="/category/automation.html">Automation</a></li>
                    <li><a href="/category/books.html">Books</a></li>
                    <li><a href="/category/coding.html">Coding</a></li>
                    <li><a href="/category/conferences.html">Conferences</a></li>
                    <li><a href="/category/conferenes.html">Conferenes</a></li>
                    <li><a href="/category/django.html">Django</a></li>
                    <li><a href="/category/github.html">GitHub</a></li>
                    <li><a href="/category/ios.html">iOS</a></li>
                    <li><a href="/category/macos.html">macOS</a></li>
                    <li><a href="/category/misc.html">misc</a></li>
                    <li><a href="/category/music.html">Music</a></li>
                    <li><a href="/category/musings.html">Musings</a></li>
                    <li><a href="/category/podcasts.html">Podcasts</a></li>
                    <li><a href="/category/productivity.html">Productivity</a></li>
                    <li><a href="/category/professional-development.html">Professional Development</a></li>
                    <li><a href="/category/python.html">Python</a></li>
                    <li><a href="/category/raspberry-pi.html">Raspberry Pi</a></li>
                    <li><a href="/category/server.html">Server</a></li>
                    <li><a href="/category/sports.html">Sports</a></li>
                    <li><a href="/category/web.html">Web</a></li>
                    <li><a href="/category/writing.html">Writing</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/making-it-easy-to-ssh-into-a-remote-server-addendum.html">Making it easy to ssh into a remote server: Addendum</a></h1>
<footer class="post-info">
        <abbr class="published" title="2019-03-25T18:30:00+01:00">
                Published: Mon 25 March 2019
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/ryan.html">ryan</a>
        </address>
<p>In <a href="/category/raspberry-pi.html">Raspberry Pi</a>.</p>
<p>tags: <a href="/tag/ssh.html">SSH</a> </p>
</footer><!-- /.post-info --><p>I recently got a new raspberry pi (yes, I might have a problem) and wanted to be able to ssh into it without having to remember the IP or password. Luckily I wrote <a href="/making-it-easy-to-ssh-into-a-remote-server.html">this helpful post</a> several months ago.</p>
<p>While it go me most of the way there, I did run into a slight issue.</p>
<h2>First Issue</h2>
<p>The issue was that I had a typo for the command to generate a key. I had:</p>
<p><code>ssh-keyken -t rsa</code></p>
<p>Which should have been:</p>
<p><code>ssh-keygen -t rsa</code></p>
<p>When I copied and pasted the original command the terminal said there was no such command. ü§¶‚Äç‚ôÇÔ∏è</p>
<h2>Second Issue</h2>
<p>Once that go cleared up I went through the steps and was able to get everything set up. Or so I thought. On attempting to ssh into my new pi I was greeted with a password prompt. WTF?</p>
<p>The first thing I did was to check to see what keys were in my \~/.ssh folder. Sure enough there were a couple of them in there.</p>
<div class="highlight"><pre><span></span><code>ls ~/.ssh
id_rsa             id_rsa.github      id_rsa.github.pub  id_rsa.pub         known_hosts        read_only_key      read_only_key.pub
</code></pre></div>

<p>Next, I interrogated the help command for <code>ssh-copy-id</code> to see what flags were available.</p>
<div class="highlight"><pre><span></span><code><span class="k">Usage</span><span class="err">:</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">ssh</span><span class="o">-</span><span class="n">copy</span><span class="o">-</span><span class="n">id</span><span class="w"> </span><span class="o">[</span><span class="n">-h|-?|-f|-n</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">-i [identity_file</span><span class="o">]</span><span class="err">]</span><span class="w"> </span><span class="o">[</span><span class="n">-p port</span><span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="n">[-o &lt;ssh -o options&gt;</span><span class="o">]</span><span class="w"> </span><span class="p">...</span><span class="err">]</span><span class="w"> </span><span class="o">[</span><span class="n">user@</span><span class="o">]</span><span class="n">hostname</span><span class="w"></span>
<span class="w">    </span><span class="o">-</span><span class="nl">f</span><span class="p">:</span><span class="w"> </span><span class="n">force</span><span class="w"> </span><span class="n">mode</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">copy</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="k">without</span><span class="w"> </span><span class="n">trying</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">check</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="k">are</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">installed</span><span class="w"></span>
<span class="w">    </span><span class="o">-</span><span class="nl">n</span><span class="p">:</span><span class="w"> </span><span class="n">dry</span><span class="w"> </span><span class="n">run</span><span class="w">    </span><span class="o">--</span><span class="w"> </span><span class="k">no</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="k">are</span><span class="w"> </span><span class="n">actually</span><span class="w"> </span><span class="n">copied</span><span class="w"></span>
<span class="w">    </span><span class="o">-</span><span class="n">h</span><span class="o">|-</span><span class="vm">?</span><span class="err">:</span><span class="w"> </span><span class="k">print</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">help</span><span class="w"></span>
</code></pre></div>

<p>I figured let‚Äôs try the <code>-n</code> flag and get the output from that. Doing so gave me</p>
<div class="highlight"><pre><span></span><code><span class="n">ryan</span><span class="nv">@Ryans</span><span class="o">-</span><span class="nl">MBP</span><span class="p">:</span><span class="o">~/</span><span class="n">Desktop</span><span class="err">$</span><span class="w"> </span><span class="n">ssh</span><span class="o">-</span><span class="n">copy</span><span class="o">-</span><span class="n">id</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="nf">pi</span><span class="nv">@newpi</span><span class="w"></span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">ssh</span><span class="o">-</span><span class="n">copy</span><span class="o">-</span><span class="nl">id</span><span class="p">:</span><span class="w"> </span><span class="nl">INFO</span><span class="p">:</span><span class="w"> </span><span class="n">Source</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="nl">installed</span><span class="p">:</span><span class="w"> </span><span class="ss">&quot;/Users/ryan/.ssh/id_rsa.github.pub&quot;</span><span class="w"></span>
<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">ssh</span><span class="o">-</span><span class="n">copy</span><span class="o">-</span><span class="nl">id</span><span class="p">:</span><span class="w"> </span><span class="nl">INFO</span><span class="p">:</span><span class="w"> </span><span class="n">attempting</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="nf">log</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="k">key</span><span class="p">(</span><span class="n">s</span><span class="p">),</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">filter</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="ow">any</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="k">are</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">installed</span><span class="w"></span>

<span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">ssh</span><span class="o">-</span><span class="n">copy</span><span class="o">-</span><span class="nl">id</span><span class="p">:</span><span class="w"> </span><span class="nl">WARNING</span><span class="p">:</span><span class="w"> </span><span class="ow">All</span><span class="w"> </span><span class="n">keys</span><span class="w"> </span><span class="n">were</span><span class="w"> </span><span class="n">skipped</span><span class="w"> </span><span class="n">because</span><span class="w"> </span><span class="n">they</span><span class="w"> </span><span class="n">already</span><span class="w"> </span><span class="n">exist</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">remote</span><span class="w"> </span><span class="k">system</span><span class="p">.</span><span class="w"></span>
<span class="w">        </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">think</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">mistake</span><span class="p">,</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">want</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="o">-</span><span class="n">f</span><span class="w"> </span><span class="k">option</span><span class="p">)</span><span class="w"></span>
</code></pre></div>

<p>OK ‚Ä¶ why is it sending the GitHub key? That‚Äôs a different problem for a different time. I see another flag available is the <code>-i</code> which will allow me to specify which key I want to send. Aha!</p>
<p>OK, now all that I need to do is use the following command to test the output:</p>
<div class="highlight"><pre><span></span><code><span class="n">ssh</span><span class="o">-</span><span class="n">copy</span><span class="o">-</span><span class="n">id</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="o">~/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="p">.</span><span class="n">pub</span><span class="w"> </span><span class="nf">pi</span><span class="nv">@newpi</span><span class="w"></span>
</code></pre></div>

<p>And sure enough it‚Äôs sending the correct key</p>
<div class="highlight"><pre><span></span><code><span class="o">/</span><span class="nv">usr</span><span class="o">/</span><span class="nv">bin</span><span class="o">/</span><span class="nv">ssh</span><span class="o">-</span><span class="nv">copy</span><span class="o">-</span><span class="nv">id</span>: <span class="nv">INFO</span>: <span class="nv">Source</span> <span class="nv">of</span> <span class="nv">key</span><span class="ss">(</span><span class="nv">s</span><span class="ss">)</span> <span class="nv">to</span> <span class="nv">be</span> <span class="nv">installed</span>: <span class="s2">&quot;</span><span class="s">/Users/ryan/.ssh/id_rsa.pub</span><span class="s2">&quot;</span>
<span class="o">/</span><span class="nv">usr</span><span class="o">/</span><span class="nv">bin</span><span class="o">/</span><span class="nv">ssh</span><span class="o">-</span><span class="nv">copy</span><span class="o">-</span><span class="nv">id</span>: <span class="nv">INFO</span>: <span class="nv">attempting</span> <span class="nv">to</span> <span class="nv">log</span> <span class="nv">in</span> <span class="nv">with</span> <span class="nv">the</span> <span class="nv">new</span> <span class="nv">key</span><span class="ss">(</span><span class="nv">s</span><span class="ss">)</span>, <span class="nv">to</span> <span class="nv">filter</span> <span class="nv">out</span> <span class="nv">any</span> <span class="nv">that</span> <span class="nv">are</span> <span class="nv">already</span> <span class="nv">installed</span>

<span class="o">/</span><span class="nv">usr</span><span class="o">/</span><span class="nv">bin</span><span class="o">/</span><span class="nv">ssh</span><span class="o">-</span><span class="nv">copy</span><span class="o">-</span><span class="nv">id</span>: <span class="nv">WARNING</span>: <span class="nv">All</span> <span class="nv">keys</span> <span class="nv">were</span> <span class="nv">skipped</span> <span class="nv">because</span> <span class="nv">they</span> <span class="nv">already</span> <span class="nv">exist</span> <span class="nv">on</span> <span class="nv">the</span> <span class="nv">remote</span> <span class="nv">system</span>.
        <span class="ss">(</span><span class="k">if</span> <span class="nv">you</span> <span class="nv">think</span> <span class="nv">this</span> <span class="nv">is</span> <span class="nv">a</span> <span class="nv">mistake</span>, <span class="nv">you</span> <span class="nv">may</span> <span class="nv">want</span> <span class="nv">to</span> <span class="nv">use</span> <span class="o">-</span><span class="nv">f</span> <span class="nv">option</span><span class="ss">)</span>
</code></pre></div>

<p>Remove the <code>-n</code> flag to send it for real</p>
<div class="highlight"><pre><span></span><code><span class="n">ssh</span><span class="o">-</span><span class="n">copy</span><span class="o">-</span><span class="n">id</span><span class="w"> </span><span class="o">-</span><span class="n">i</span><span class="w"> </span><span class="o">~/</span><span class="p">.</span><span class="n">ssh</span><span class="o">/</span><span class="n">id_rsa</span><span class="p">.</span><span class="n">pub</span><span class="w"> </span><span class="nf">pi</span><span class="nv">@newpi</span><span class="w"></span>
</code></pre></div>

<p>And try to ssh in again</p>
<div class="highlight"><pre><span></span><code><span class="n">ssh</span><span class="w"> </span><span class="nf">pi</span><span class="nv">@newpi</span><span class="w"></span>
</code></pre></div>

<p>Success!</p>
<p>I wanted to write this up for 2 reasons:</p>
<ol>
<li>So I can refer back to it if I ever need to. This blog is mostly for me to write down technical things that I do so I can remember them later on</li>
<li>This is the first time I‚Äôve run into an issue with a command like tool and simply used the help to figure out how to fix the problem and I wanted to memorialize that. It felt <a href="https://thegoodplace.fandom.com/wiki/Censored_Curse_Words">forking</a> awesome to do that.</li>
</ol>
<p>Footnote: Yes ‚Ä¶ calling my new raspberry pi <code>newpi</code> in my hosts file is dumb. Yes, when I get my next new Raspberry Pi I will be wondering what to call it. YEs, I am going to try and remember to make the change before it happens so that I don‚Äôt end up with the next Pi being called <code>newnewpi</code> and the one after that being <code>newnewnewpi</code></p>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/making-it-easy-to-ssh-into-a-remote-server.html" rel="bookmark"
                           title="Permalink to Making it easy to ssh into a remote server">Making it easy to ssh into a remote server</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-05-05T12:54:00+02:00">
                Published: Sat 05 May 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/ryan.html">ryan</a>
        </address>
<p>In <a href="/category/raspberry-pi.html">Raspberry Pi</a>.</p>
<p>tags: <a href="/tag/digital-ocean.html">digital ocean</a> <a href="/tag/linux.html">linux</a> <a href="/tag/remote-servers.html">Remote servers</a> <a href="/tag/ssh.html">SSH</a> <a href="/tag/terminal.html">Terminal</a> </p>
</footer><!-- /.post-info -->                <p>Logging into a remote server is a drag. Needing to remember the password (or get it from <a href="https://1password.com">1Password</a>); needing to remember the IP address of the remote server. Ugh.</p>
<p>It‚Äôd be so much easier if I could just</p>
<div class="highlight"><pre><span></span><code><span class="n">ssh</span><span class="w"> </span><span class="n">username</span><span class="nv">@servername</span><span class="w"></span>
</code></pre></div>

<p>and get into the server.</p>
<p>And it turns ‚Ä¶</p>
                <a class="readmore" href="/making-it-easy-to-ssh-into-a-remote-server.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://simonwillison.net">Simon Wilison</a></li>
                            <li><a href="https://www.mattlayman.com">Matt Layman</a></li>
                            <li><a href="https://pybit.es">PyBites</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="https://twitter.com/ryancheley/">Twitter</a></li>
                            <li><a href="https://github.com/ryancheley">GitHub</a></li>
                            <li><a href="https://www.linkedin.com/in/ryan-cheley/">LinkedIn</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>